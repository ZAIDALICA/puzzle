function cov_2gdd96qsfa(){var path="C:\\Users\\georg\\georgeFiles\\workplaces\\jsWorkspace\\puzzle\\server.js";var hash="de34c23d6ea710635080cb74bfd5fcfda345b3ed";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\georg\\georgeFiles\\workplaces\\jsWorkspace\\puzzle\\server.js",statementMap:{"0":{start:{line:37,column:17},end:{line:37,column:19}},"1":{start:{line:39,column:4},end:{line:39,column:15}},"2":{start:{line:40,column:4},end:{line:40,column:15}},"3":{start:{line:41,column:4},end:{line:41,column:23}},"4":{start:{line:42,column:4},end:{line:42,column:25}},"5":{start:{line:43,column:4},end:{line:43,column:17}},"6":{start:{line:57,column:14},end:{line:57,column:32}},"7":{start:{line:59,column:10},end:{line:59,column:19}},"8":{start:{line:63,column:13},end:{line:63,column:57}},"9":{start:{line:67,column:13},end:{line:67,column:37}},"10":{start:{line:68,column:13},end:{line:68,column:34}},"11":{start:{line:69,column:2},end:{line:69,column:70}},"12":{start:{line:72,column:0},end:{line:72,column:34}},"13":{start:{line:76,column:9},end:{line:76,column:37}},"14":{start:{line:78,column:0},end:{line:78,column:27}},"15":{start:{line:82,column:2},end:{line:82,column:21}},"16":{start:{line:83,column:2},end:{line:83,column:43}},"17":{start:{line:89,column:0},end:{line:157,column:2}},"18":{start:{line:93,column:4},end:{line:93,column:54}},"19":{start:{line:105,column:6},end:{line:112,column:9}},"20":{start:{line:106,column:20},end:{line:106,column:69}},"21":{start:{line:107,column:8},end:{line:107,column:31}},"22":{start:{line:130,column:4},end:{line:150,column:7}},"23":{start:{line:131,column:28},end:{line:131,column:38}},"24":{start:{line:132,column:6},end:{line:149,column:7}},"25":{start:{line:136,column:8},end:{line:148,column:9}},"26":{start:{line:136,column:20},end:{line:136,column:21}},"27":{start:{line:137,column:26},end:{line:137,column:35}},"28":{start:{line:140,column:10},end:{line:147,column:11}},"29":{start:{line:144,column:14},end:{line:144,column:48}},"30":{start:{line:145,column:14},end:{line:145,column:50}},"31":{start:{line:146,column:14},end:{line:146,column:56}},"32":{start:{line:152,column:4},end:{line:154,column:7}},"33":{start:{line:153,column:6},end:{line:153,column:45}},"34":{start:{line:204,column:2},end:{line:234,column:3}},"35":{start:{line:204,column:14},end:{line:204,column:15}},"36":{start:{line:205,column:4},end:{line:210,column:5}},"37":{start:{line:206,column:6},end:{line:206,column:27}},"38":{start:{line:208,column:9},end:{line:210,column:5}},"39":{start:{line:209,column:6},end:{line:209,column:27}},"40":{start:{line:211,column:4},end:{line:213,column:5}},"41":{start:{line:212,column:6},end:{line:212,column:27}},"42":{start:{line:214,column:4},end:{line:216,column:5}},"43":{start:{line:215,column:6},end:{line:215,column:27}},"44":{start:{line:237,column:0},end:{line:237,column:18}}},fnMap:{"0":{name:"Piece",decl:{start:{line:38,column:9},end:{line:38,column:14}},loc:{start:{line:38,column:39},end:{line:44,column:1}},line:38},"1":{name:"listen",decl:{start:{line:66,column:9},end:{line:66,column:15}},loc:{start:{line:66,column:18},end:{line:70,column:1}},line:66},"2":{name:"heartbeat",decl:{start:{line:80,column:9},end:{line:80,column:18}},loc:{start:{line:80,column:21},end:{line:84,column:1}},line:80},"3":{name:"(anonymous_3)",decl:{start:{line:92,column:2},end:{line:92,column:3}},loc:{start:{line:92,column:19},end:{line:156,column:3}},line:92},"4":{name:"(anonymous_4)",decl:{start:{line:105,column:25},end:{line:105,column:26}},loc:{start:{line:105,column:37},end:{line:112,column:7}},line:105},"5":{name:"(anonymous_5)",decl:{start:{line:130,column:24},end:{line:130,column:25}},loc:{start:{line:130,column:39},end:{line:150,column:5}},line:130},"6":{name:"(anonymous_6)",decl:{start:{line:152,column:28},end:{line:152,column:29}},loc:{start:{line:152,column:39},end:{line:154,column:5}},line:152},"7":{name:"moving",decl:{start:{line:203,column:9},end:{line:203,column:15}},loc:{start:{line:203,column:27},end:{line:235,column:1}},line:203}},branchMap:{"0":{loc:{start:{line:63,column:24},end:{line:63,column:48}},type:"binary-expr",locations:[{start:{line:63,column:24},end:{line:63,column:40}},{start:{line:63,column:44},end:{line:63,column:48}}],line:63},"1":{loc:{start:{line:132,column:6},end:{line:149,column:7}},type:"if",locations:[{start:{line:132,column:6},end:{line:149,column:7}},{start:{line:132,column:6},end:{line:149,column:7}}],line:132},"2":{loc:{start:{line:140,column:10},end:{line:147,column:11}},type:"if",locations:[{start:{line:140,column:10},end:{line:147,column:11}},{start:{line:140,column:10},end:{line:147,column:11}}],line:140},"3":{loc:{start:{line:205,column:4},end:{line:210,column:5}},type:"if",locations:[{start:{line:205,column:4},end:{line:210,column:5}},{start:{line:205,column:4},end:{line:210,column:5}}],line:205},"4":{loc:{start:{line:208,column:9},end:{line:210,column:5}},type:"if",locations:[{start:{line:208,column:9},end:{line:210,column:5}},{start:{line:208,column:9},end:{line:210,column:5}}],line:208},"5":{loc:{start:{line:211,column:4},end:{line:213,column:5}},type:"if",locations:[{start:{line:211,column:4},end:{line:213,column:5}},{start:{line:211,column:4},end:{line:213,column:5}}],line:211},"6":{loc:{start:{line:214,column:4},end:{line:216,column:5}},type:"if",locations:[{start:{line:214,column:4},end:{line:216,column:5}},{start:{line:214,column:4},end:{line:216,column:5}}],line:214}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"de34c23d6ea710635080cb74bfd5fcfda345b3ed"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2gdd96qsfa=function(){return actualCoverage;};}return actualCoverage;}cov_2gdd96qsfa();/* eslint-disable no-param-reassign */ /* eslint-disable max-params */ /* eslint-disable array-element-newline */ /* eslint-disable radix */ /* eslint-disable max-statements-per-line */ /* eslint-disable max-len */ /* eslint-disable no-process-env */ /* eslint-disable no-use-before-define */ /* eslint-disable prefer-destructuring */ /* eslint-disable capitalized-comments */ /* eslint-disable no-path-concat */ /* eslint-disable prefer-template */ /* eslint-disable no-undef */ //the server will handle the killing
//also will handle the updating positions for pieces 
//also will update the pieces for each socket like a heartbeat 
/* var app = require('express')();
var http = require('http').createServer(app);
var io = require('socket.io')(http);
var path = require('path');


app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname +'/index.html'));
});

io.on('connection', () => {

    console.log('Hi George Welcome');
});

http.listen(3000, () => {
    console.log('listening on 3000');
}); */var piecesInfo=(cov_2gdd96qsfa().s[0]++,[]);function Piece(x,y,heads,linked,id){cov_2gdd96qsfa().f[0]++;cov_2gdd96qsfa().s[1]++;this.x=x;cov_2gdd96qsfa().s[2]++;this.y=y;cov_2gdd96qsfa().s[3]++;this.heads=heads;cov_2gdd96qsfa().s[4]++;this.linked=linked;cov_2gdd96qsfa().s[5]++;this.id=id;}// Using express: http://expressjs.com/
var express=(cov_2gdd96qsfa().s[6]++,require('express'));// Create the app
var app=(cov_2gdd96qsfa().s[7]++,express());// Set up the server
// process.env.PORT is related to deploying on heroku
var server=(cov_2gdd96qsfa().s[8]++,app.listen((cov_2gdd96qsfa().b[0][0]++,process.env.PORT)||(cov_2gdd96qsfa().b[0][1]++,3000),listen));// This call back just tells us that the server has started
function listen(){cov_2gdd96qsfa().f[1]++;var host=(cov_2gdd96qsfa().s[9]++,server.address().address);var port=(cov_2gdd96qsfa().s[10]++,server.address().port);cov_2gdd96qsfa().s[11]++;console.log('Example app listening at http://'+host+':'+port);}cov_2gdd96qsfa().s[12]++;app.use(express.static('public'));// WebSocket Portion
// WebSockets work with the HTTP server
var io=(cov_2gdd96qsfa().s[13]++,require('socket.io')(server));cov_2gdd96qsfa().s[14]++;setInterval(heartbeat,10);function heartbeat(){cov_2gdd96qsfa().f[2]++;cov_2gdd96qsfa().s[15]++;//moving all the players
moving(piecesInfo);cov_2gdd96qsfa().s[16]++;io.sockets.emit('heartbeat',piecesInfo);}// Register a callback function to run when we have an individual connection
// This is run for each individual user that connects
cov_2gdd96qsfa().s[17]++;io.sockets.on('connection',// We are given a websocket object in our function
function(socket){cov_2gdd96qsfa().f[3]++;cov_2gdd96qsfa().s[18]++;console.log('We have a new client: '+socket.id);/*    socket.on('start', function(piece1) {
        //console.log(socket.id + ' ' + data.x + ' ' + data.y + ' ' + data.r);
        piece = new Piece(piece1.x, piece1.y, piece1.heads, piece1.linked1, piece1.piecePos ,socket.id , pieces);
        pieces.push(piece);
        console.log(piece);
      }); */ //socket.emit('myIdReady', socket.id);
cov_2gdd96qsfa().s[19]++;socket.on('start',function(k){cov_2gdd96qsfa().f[4]++;let piece=(cov_2gdd96qsfa().s[20]++,new Piece(k.x,k.y,k.heads,k.linked,socket.id));cov_2gdd96qsfa().s[21]++;piecesInfo.push(piece);//console.log(`piece ${piece.id}`);
//socket.emit('yourId', socket.id);
//socket.on('ready')
//io.sockets.emit('newPiece', piecesInfo);
});/*socket.on('update', function(data1) {
        var piece;
        for (var i = 0; i < pieces.length; i++) {
          if (socket.id == pieces[i].id) {
            piece = pieces[i];
            piece.x = data1.x;
            piece.y = data1.y;
          }
        }
        piece.x = data.x;
        piece.y = data.y;
        piece.heads = dats.heads;
        piece.linked = data.linked; 
      });*/cov_2gdd96qsfa().s[22]++;socket.on('update',function(dataX){cov_2gdd96qsfa().f[5]++;const copyPieceInfo=(cov_2gdd96qsfa().s[23]++,piecesInfo);cov_2gdd96qsfa().s[24]++;if(copyPieceInfo.length>0){cov_2gdd96qsfa().b[1][0]++;cov_2gdd96qsfa().s[25]++;//console.log(socket.id);
//console.log(`testing also dataX ${copyPieceInfo[0].id}`);
for(let i=(cov_2gdd96qsfa().s[26]++,0);i<copyPieceInfo.length;i++){const testing=(cov_2gdd96qsfa().s[27]++,socket.id);//console.log(`testing ${testing}`);
//console.log(`testing also dataX ${copyPieceInfo[i]}`);
cov_2gdd96qsfa().s[28]++;if(copyPieceInfo[i].id==testing){cov_2gdd96qsfa().b[2][0]++;cov_2gdd96qsfa().s[29]++;//console.log(`testing ${testing}`);
//piecesInfo[i].x = dataX.x;
//piecesInfo[i].y = dataX.y;
piecesInfo[i].heads=dataX.heads;cov_2gdd96qsfa().s[30]++;piecesInfo[i].linked=dataX.linked;cov_2gdd96qsfa().s[31]++;piecesInfo[i].direction=dataX.direction;}else{cov_2gdd96qsfa().b[2][1]++;}}}else{cov_2gdd96qsfa().b[1][1]++;}});cov_2gdd96qsfa().s[32]++;socket.on('disconnect',function(){cov_2gdd96qsfa().f[6]++;cov_2gdd96qsfa().s[33]++;console.log('Client has disconnected');});});/*     socket.on('start', function(data) {
      console.log(socket.id + ' ' + data.x + ' ' + data.y + ' ' + data.r);
      var blob = new Blob(socket.id, data.x, data.y, data.r);
      blobs.push(blob);
    }); */ /*     socket.on('update', function(data) {
      //console.log(socket.id + " " + data.x + " " + data.y + " " + data.r);
      var blob;
      for (var i = 0; i < blobs.length; i++) {
        if (socket.id == blobs[i].id) {
          blob = blobs[i];
        }
      }
      blob.x = data.x;
      blob.y = data.y;
      blob.r = data.r;
    }); */ /* const express = require('express')
const app = express()
const port = 3000

app.get('/', (req, res) => res.send('Hello George'))

app.listen(port, () => {
    console.log(`Example app listening at http://localhost:${port}`)
}); */function moving(allPuzzles){cov_2gdd96qsfa().f[7]++;cov_2gdd96qsfa().s[34]++;for(var i=(cov_2gdd96qsfa().s[35]++,0);i<allPuzzles.length;i++){cov_2gdd96qsfa().s[36]++;if(allPuzzles[i].direction=='left'){cov_2gdd96qsfa().b[3][0]++;cov_2gdd96qsfa().s[37]++;allPuzzles[i].x-=1;}else{cov_2gdd96qsfa().b[3][1]++;cov_2gdd96qsfa().s[38]++;if(allPuzzles[i].direction=='right'){cov_2gdd96qsfa().b[4][0]++;cov_2gdd96qsfa().s[39]++;allPuzzles[i].x+=1;}else{cov_2gdd96qsfa().b[4][1]++;}}cov_2gdd96qsfa().s[40]++;if(allPuzzles[i].direction=='up'){cov_2gdd96qsfa().b[5][0]++;cov_2gdd96qsfa().s[41]++;allPuzzles[i].y-=1;}else{cov_2gdd96qsfa().b[5][1]++;}cov_2gdd96qsfa().s[42]++;if(allPuzzles[i].direction=='down'){cov_2gdd96qsfa().b[6][0]++;cov_2gdd96qsfa().s[43]++;allPuzzles[i].y+=1;}else{cov_2gdd96qsfa().b[6][1]++;}/* if(allPuzzles[i].linked.length > 0){
      for(var j = 0 ; j < allPuzzles[i].linked.length; j++){
        if(allPuzzles[i].direction == 'left'){
          allPuzzles[i].linked[j].x -= 1;
        }
        else if(allPuzzles[i].direction == 'right'){
          allPuzzles[i].linked[j].x += 1;
        }
        if(allPuzzles[i].direction == 'up'){
          allPuzzles[i].linked[j].y -= 1;
        }
        if(allPuzzles[i].direction == 'down'){
          allPuzzles[i].linked[j].y += 1;
        }
      }
    } */}}cov_2gdd96qsfa().s[44]++;exports.app=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJwaWVjZXNJbmZvIiwiUGllY2UiLCJ4IiwieSIsImhlYWRzIiwibGlua2VkIiwiaWQiLCJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsInNlcnZlciIsImxpc3RlbiIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiaG9zdCIsImFkZHJlc3MiLCJwb3J0IiwiY29uc29sZSIsImxvZyIsInVzZSIsInN0YXRpYyIsImlvIiwic2V0SW50ZXJ2YWwiLCJoZWFydGJlYXQiLCJtb3ZpbmciLCJzb2NrZXRzIiwiZW1pdCIsIm9uIiwic29ja2V0IiwiayIsInBpZWNlIiwicHVzaCIsImRhdGFYIiwiY29weVBpZWNlSW5mbyIsImxlbmd0aCIsImkiLCJ0ZXN0aW5nIiwiZGlyZWN0aW9uIiwiYWxsUHV6emxlcyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJ3aU1BZVk7MkZBZlosc0MsQ0FDQSwrQixDQUNBLDBDLENBQ0EsMEIsQ0FDQSw0QyxDQUNBLDRCLENBQ0EsbUMsQ0FDQSx5QyxDQUNBLHlDLENBQ0EseUMsQ0FDQSxtQyxDQUNBLG9DLENBQ0EsNkIsQ0FFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFDQSxHQUFJQSxDQUFBQSxVQUFVLDBCQUFHLEVBQUgsQ0FBZCxDQUNBLFFBQVNDLENBQUFBLEtBQVQsQ0FBZUMsQ0FBZixDQUFrQkMsQ0FBbEIsQ0FBcUJDLEtBQXJCLENBQTRCQyxNQUE1QixDQUFvQ0MsRUFBcEMsQ0FBdUMsaURBQ25DLEtBQUtKLENBQUwsQ0FBU0EsQ0FBVCxDQURtQyx3QkFFbkMsS0FBS0MsQ0FBTCxDQUFTQSxDQUFULENBRm1DLHdCQUduQyxLQUFLQyxLQUFMLENBQWFBLEtBQWIsQ0FIbUMsd0JBSW5DLEtBQUtDLE1BQUwsQ0FBY0EsTUFBZCxDQUptQyx3QkFLbkMsS0FB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QixDQUNELENBRkksaUNBRUosQ0FOd0MseUJBT3pDLEdBQUdxQyxVQUFVLENBQUNILENBQUQsQ0FBVixDQUFjRSxTQUFkLEVBQTJCLElBQTlCLENBQW1DLHFEQUNqQ0MsVUFBVSxDQUFDSCxDQUFELENBQVYsQ0FBY2pDLENBQWQsRUFBbUIsQ0FBbkIsQ0FDRCxDQUZELGlDQVB5Qyx5QkFVekMsR0FBR29DLFVBQVUsQ0FBQ0gsQ0FBRCxDQUFWLENBQWNFLFNBQWQsRUFBMkIsTUFBOUIsQ0FBcUMscURBQ25DQyxVQUFVLENBQUNILENBQUQsQ0FBVixDQUFjakMsQ0FBZCxFQUFtQixDQUFuQixDQUNELENBRkQsaUNBSUE7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFDRyxDQUNGLEMseUJBRURxQyxPQUFPLENBQUMvQixHQUFSLENBQWNBLEdBQWQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LXBhcmFtcyAqL1xuLyogZXNsaW50LWRpc2FibGUgYXJyYXktZWxlbWVudC1uZXdsaW5lICovXG4vKiBlc2xpbnQtZGlzYWJsZSByYWRpeCAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMtcGVyLWxpbmUgKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb2Nlc3MtZW52ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWRlc3RydWN0dXJpbmcgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhcGl0YWxpemVkLWNvbW1lbnRzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXRoLWNvbmNhdCAqL1xuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXRlbXBsYXRlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuXG4vL3RoZSBzZXJ2ZXIgd2lsbCBoYW5kbGUgdGhlIGtpbGxpbmdcbi8vYWxzbyB3aWxsIGhhbmRsZSB0aGUgdXBkYXRpbmcgcG9zaXRpb25zIGZvciBwaWVjZXMgXG4vL2Fsc28gd2lsbCB1cGRhdGUgdGhlIHBpZWNlcyBmb3IgZWFjaCBzb2NrZXQgbGlrZSBhIGhlYXJ0YmVhdCBcblxuLyogdmFyIGFwcCA9IHJlcXVpcmUoJ2V4cHJlc3MnKSgpO1xudmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJykuY3JlYXRlU2VydmVyKGFwcCk7XG52YXIgaW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKShodHRwKTtcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5cbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArJy9pbmRleC5odG1sJykpO1xufSk7XG5cbmlvLm9uKCdjb25uZWN0aW9uJywgKCkgPT4ge1xuXG4gICAgY29uc29sZS5sb2coJ0hpIEdlb3JnZSBXZWxjb21lJyk7XG59KTtcblxuaHR0cC5saXN0ZW4oMzAwMCwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdsaXN0ZW5pbmcgb24gMzAwMCcpO1xufSk7ICovXG52YXIgcGllY2VzSW5mbyA9IFtdO1xuZnVuY3Rpb24gUGllY2UoeCwgeSwgaGVhZHMsIGxpbmtlZCwgaWQpe1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLmhlYWRzID0gaGVhZHM7XG4gICAgdGhpcy5saW5rZWQgPSBsaW5rZWQ7XG4gICAgdGhpcy5pZCA9IGlkO1xufVxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8vIFVzaW5nIGV4cHJlc3M6IGh0dHA6Ly9leHByZXNzanMuY29tL1xudmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG4vLyBDcmVhdGUgdGhlIGFwcFxudmFyIGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gU2V0IHVwIHRoZSBzZXJ2ZXJcbi8vIHByb2Nlc3MuZW52LlBPUlQgaXMgcmVsYXRlZCB0byBkZXBsb3lpbmcgb24gaGVyb2t1XG52YXIgc2VydmVyID0gYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDAsIGxpc3Rlbik7XG5cbi8vIFRoaXMgY2FsbCBiYWNrIGp1c3QgdGVsbHMgdXMgdGhhdCB0aGUgc2VydmVyIGhhcyBzdGFydGVkXG5mdW5jdGlvbiBsaXN0ZW4oKSB7XG4gIHZhciBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzO1xuICB2YXIgcG9ydCA9IHNlcnZlci5hZGRyZXNzKCkucG9ydDtcbiAgY29uc29sZS5sb2coJ0V4YW1wbGUgYXBwIGxpc3RlbmluZyBhdCBodHRwOi8vJyArIGhvc3QgKyAnOicgKyBwb3J0KTtcbn1cblxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpO1xuXG4vLyBXZWJTb2NrZXQgUG9ydGlvblxuLy8gV2ViU29ja2V0cyB3b3JrIHdpdGggdGhlIEhUVFAgc2VydmVyXG52YXIgaW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKShzZXJ2ZXIpO1xuXG5zZXRJbnRlcnZhbChoZWFydGJlYXQsIDEwKTtcblxuZnVuY3Rpb24gaGVhcnRiZWF0KCkge1xuICAvL21vdmluZyBhbGwgdGhlIHBsYXllcnNcbiAgbW92aW5nKHBpZWNlc0luZm8pO1xuICBpby5zb2NrZXRzLmVtaXQoJ2hlYXJ0YmVhdCcsIHBpZWNlc0luZm8pO1xufVxuXG5cbi8vIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcnVuIHdoZW4gd2UgaGF2ZSBhbiBpbmRpdmlkdWFsIGNvbm5lY3Rpb25cbi8vIFRoaXMgaXMgcnVuIGZvciBlYWNoIGluZGl2aWR1YWwgdXNlciB0aGF0IGNvbm5lY3RzXG5pby5zb2NrZXRzLm9uKFxuICAnY29ubmVjdGlvbicsXG4gIC8vIFdlIGFyZSBnaXZlbiBhIHdlYnNvY2tldCBvYmplY3QgaW4gb3VyIGZ1bmN0aW9uXG4gIGZ1bmN0aW9uKHNvY2tldCkge1xuICAgIGNvbnNvbGUubG9nKCdXZSBoYXZlIGEgbmV3IGNsaWVudDogJyArIHNvY2tldC5pZCk7XG5cbiAgIFxuXG4gLyogICAgc29ja2V0Lm9uKCdzdGFydCcsIGZ1bmN0aW9uKHBpZWNlMSkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHNvY2tldC5pZCArICcgJyArIGRhdGEueCArICcgJyArIGRhdGEueSArICcgJyArIGRhdGEucik7XG4gICAgICAgIHBpZWNlID0gbmV3IFBpZWNlKHBpZWNlMS54LCBwaWVjZTEueSwgcGllY2UxLmhlYWRzLCBwaWVjZTEubGlua2VkMSwgcGllY2UxLnBpZWNlUG9zICxzb2NrZXQuaWQgLCBwaWVjZXMpO1xuICAgICAgICBwaWVjZXMucHVzaChwaWVjZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBpZWNlKTtcbiAgICAgIH0pOyAqL1xuICAgICAgLy9zb2NrZXQuZW1pdCgnbXlJZFJlYWR5Jywgc29ja2V0LmlkKTtcblxuICAgICAgc29ja2V0Lm9uKCdzdGFydCcsIGZ1bmN0aW9uKGspIHtcbiAgICAgICAgbGV0IHBpZWNlID0gbmV3IFBpZWNlKGsueCwgay55LCBrLmhlYWRzLCBrLmxpbmtlZCwgc29ja2V0LmlkKTtcbiAgICAgICAgcGllY2VzSW5mby5wdXNoKHBpZWNlKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhgcGllY2UgJHtwaWVjZS5pZH1gKTtcbiAgICAgICAgLy9zb2NrZXQuZW1pdCgneW91cklkJywgc29ja2V0LmlkKTtcbiAgICAgICAgLy9zb2NrZXQub24oJ3JlYWR5JylcbiAgICAgICAgLy9pby5zb2NrZXRzLmVtaXQoJ25ld1BpZWNlJywgcGllY2VzSW5mbyk7XG4gICAgICB9KTtcblxuICAgICAgIC8qc29ja2V0Lm9uKCd1cGRhdGUnLCBmdW5jdGlvbihkYXRhMSkge1xuICAgICAgICB2YXIgcGllY2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGllY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHNvY2tldC5pZCA9PSBwaWVjZXNbaV0uaWQpIHtcbiAgICAgICAgICAgIHBpZWNlID0gcGllY2VzW2ldO1xuICAgICAgICAgICAgcGllY2UueCA9IGRhdGExLng7XG4gICAgICAgICAgICBwaWVjZS55ID0gZGF0YTEueTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGllY2UueCA9IGRhdGEueDtcbiAgICAgICAgcGllY2UueSA9IGRhdGEueTtcbiAgICAgICAgcGllY2UuaGVhZHMgPSBkYXRzLmhlYWRzO1xuICAgICAgICBwaWVjZS5saW5rZWQgPSBkYXRhLmxpbmtlZDsgXG4gICAgICB9KTsqL1xuXG5cbiAgICBzb2NrZXQub24oJ3VwZGF0ZScsIGZ1bmN0aW9uKGRhdGFYKXtcbiAgICAgIGNvbnN0IGNvcHlQaWVjZUluZm8gPSBwaWVjZXNJbmZvOyBcbiAgICAgIGlmKGNvcHlQaWVjZUluZm8ubGVuZ3RoPjApe1xuICAgICAgICAvL2NvbnNvbGUubG9nKHNvY2tldC5pZCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coYHRlc3RpbmcgYWxzbyBkYXRhWCAke2NvcHlQaWVjZUluZm9bMF0uaWR9YCk7XG4gIFxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29weVBpZWNlSW5mby5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgY29uc3QgdGVzdGluZyA9IHNvY2tldC5pZDtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGB0ZXN0aW5nICR7dGVzdGluZ31gKTtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGB0ZXN0aW5nIGFsc28gZGF0YVggJHtjb3B5UGllY2VJbmZvW2ldfWApO1xuICAgICAgICAgIGlmKGNvcHlQaWVjZUluZm9baV0uaWQgPT0gdGVzdGluZyl7XG4gICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYHRlc3RpbmcgJHt0ZXN0aW5nfWApO1xuICAgICAgICAgICAgICAvL3BpZWNlc0luZm9baV0ueCA9IGRhdGFYLng7XG4gICAgICAgICAgICAgIC8vcGllY2VzSW5mb1tpXS55ID0gZGF0YVgueTtcbiAgICAgICAgICAgICAgcGllY2VzSW5mb1tpXS5oZWFkcyA9IGRhdGFYLmhlYWRzO1xuICAgICAgICAgICAgICBwaWVjZXNJbmZvW2ldLmxpbmtlZCA9IGRhdGFYLmxpbmtlZDtcbiAgICAgICAgICAgICAgcGllY2VzSW5mb1tpXS5kaXJlY3Rpb24gPSBkYXRhWC5kaXJlY3Rpb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgaGFzIGRpc2Nvbm5lY3RlZCcpO1xuICAgIH0pO1xuICAgIFxuICB9XG4pO1xuXG5cblxuXG4vKiAgICAgc29ja2V0Lm9uKCdzdGFydCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKHNvY2tldC5pZCArICcgJyArIGRhdGEueCArICcgJyArIGRhdGEueSArICcgJyArIGRhdGEucik7XG4gICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKHNvY2tldC5pZCwgZGF0YS54LCBkYXRhLnksIGRhdGEucik7XG4gICAgICBibG9icy5wdXNoKGJsb2IpO1xuICAgIH0pOyAqL1xuXG4vKiAgICAgc29ja2V0Lm9uKCd1cGRhdGUnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKHNvY2tldC5pZCArIFwiIFwiICsgZGF0YS54ICsgXCIgXCIgKyBkYXRhLnkgKyBcIiBcIiArIGRhdGEucik7XG4gICAgICB2YXIgYmxvYjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxvYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNvY2tldC5pZCA9PSBibG9ic1tpXS5pZCkge1xuICAgICAgICAgIGJsb2IgPSBibG9ic1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmxvYi54ID0gZGF0YS54O1xuICAgICAgYmxvYi55ID0gZGF0YS55O1xuICAgICAgYmxvYi5yID0gZGF0YS5yO1xuICAgIH0pOyAqL1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuLyogY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxuY29uc3QgYXBwID0gZXhwcmVzcygpXG5jb25zdCBwb3J0ID0gMzAwMFxuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiByZXMuc2VuZCgnSGVsbG8gR2VvcmdlJykpXG5cbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBFeGFtcGxlIGFwcCBsaXN0ZW5pbmcgYXQgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YClcbn0pOyAqL1xuXG5cbmZ1bmN0aW9uIG1vdmluZyhhbGxQdXp6bGVzKXtcbiAgZm9yKHZhciBpID0gMCA7IGkgPCBhbGxQdXp6bGVzLmxlbmd0aDsgaSsrKXtcbiAgICBpZihhbGxQdXp6bGVzW2ldLmRpcmVjdGlvbiA9PSAnbGVmdCcpe1xuICAgICAgYWxsUHV6emxlc1tpXS54IC09IDE7XG4gICAgfVxuICAgIGVsc2UgaWYoYWxsUHV6emxlc1tpXS5kaXJlY3Rpb24gPT0gJ3JpZ2h0Jyl7XG4gICAgICBhbGxQdXp6bGVzW2ldLnggKz0gMTtcbiAgICB9XG4gICAgaWYoYWxsUHV6emxlc1tpXS5kaXJlY3Rpb24gPT0gJ3VwJyl7XG4gICAgICBhbGxQdXp6bGVzW2ldLnkgLT0gMTtcbiAgICB9XG4gICAgaWYoYWxsUHV6emxlc1tpXS5kaXJlY3Rpb24gPT0gJ2Rvd24nKXtcbiAgICAgIGFsbFB1enpsZXNbaV0ueSArPSAxO1xuICAgIH1cblxuICAgIC8qIGlmKGFsbFB1enpsZXNbaV0ubGlua2VkLmxlbmd0aCA+IDApe1xuICAgICAgZm9yKHZhciBqID0gMCA7IGogPCBhbGxQdXp6bGVzW2ldLmxpbmtlZC5sZW5ndGg7IGorKyl7XG4gICAgICAgIGlmKGFsbFB1enpsZXNbaV0uZGlyZWN0aW9uID09ICdsZWZ0Jyl7XG4gICAgICAgICAgYWxsUHV6emxlc1tpXS5saW5rZWRbal0ueCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoYWxsUHV6emxlc1tpXS5kaXJlY3Rpb24gPT0gJ3JpZ2h0Jyl7XG4gICAgICAgICAgYWxsUHV6emxlc1tpXS5saW5rZWRbal0ueCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmKGFsbFB1enpsZXNbaV0uZGlyZWN0aW9uID09ICd1cCcpe1xuICAgICAgICAgIGFsbFB1enpsZXNbaV0ubGlua2VkW2pdLnkgLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZihhbGxQdXp6bGVzW2ldLmRpcmVjdGlvbiA9PSAnZG93bicpe1xuICAgICAgICAgIGFsbFB1enpsZXNbaV0ubGlua2VkW2pdLnkgKz0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gKi9cbiAgfVxufVxuXG5leHBvcnRzLmFwcCA9IGFwcDtcbiJdfQ==